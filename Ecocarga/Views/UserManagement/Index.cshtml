@model IEnumerable<Ecocarga.Models.UserViewModel>

<div class="container mt-4">
    <h2 class="mb-4">Administración de Usuarios</h2>

    <div class="mb-3">
        <a asp-action="Create" class="btn btn-success">Crear Nuevo Usuario</a>
    </div>

    <table id="userTable" class="table table-striped table-hover">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th> <!-- Cambié Id por # -->
                <th scope="col">Email</th>
                <th scope="col">Rol</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @{
                int counter = 1; // Inicializa el contador
            }
            @foreach (var user in Model)
            {
                <tr>
                    <td>@counter</td> <!-- Muestra el valor del contador -->
                    <td>@user.Email</td>
                    <td>@string.Join(", ", user.Roles)</td> <!-- Si Roles es una lista, lo combino en un string -->
                    <td>
                        <a asp-action="Edit" asp-route-id="@user.Id" class="btn btn-sm btn-primary">Editar</a>
                        <a asp-action="Delete" asp-route-id="@user.Email" class="btn btn-sm btn-danger">Eliminar</a>
                    </td>
                </tr>
                counter++; // Incrementa el contador
            }
        </tbody>
    </table>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#userTable').DataTable({
                "paging": true,           // Paginación activada
                "searching": true,        // Búsqueda activada
                "ordering": true,         // Permite ordenar columnas
                "info": true,             // Muestra información de la tabla
                "lengthChange": false,    // Desactiva la opción de cambiar la cantidad de registros mostrados
                "pageLength": 10,         // Cantidad de registros por página
                "language": {
                    "search": "Buscar:",   // Traduce la etiqueta de búsqueda
                    "paginate": {
                        "first": "Primero",
                        "last": "Último",
                        "next": "Siguiente",
                        "previous": "Anterior"
                    },
                    "info": "Mostrando _START_ a _END_ de _TOTAL_ usuarios",
                    "infoFiltered": "(filtrado de _MAX_ usuarios en total)"
                }
            });
        });
    </script>
}
